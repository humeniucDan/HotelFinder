{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"d-flex text-center\",\n  style: {\n    \"height\": \"20vh\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"m-auto\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Your Position\", -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"m-auto\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Distance\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"m-auto\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Clicked Position\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = {\n  ref: \"mapDiv\",\n  style: {\n    \"width\": \"100%\",\n    \"height\": \"80vh\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createTextVNode(\" Latitude: \" + _toDisplayString($setup.currPos.lat.toFixed(2)) + \", Longitude: \" + _toDisplayString($setup.currPos.lng.toFixed(2)), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createTextVNode(\" \" + _toDisplayString($setup.distance.toFixed(2)) + \" miles \", 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, $setup.otherPos ? (_openBlock(), _createElementBlock(\"span\", _hoisted_8, \" Latitude: \" + _toDisplayString($setup.otherPos.lat.toFixed(2)) + \", Longitude: \" + _toDisplayString($setup.otherPos.lng.toFixed(2)), 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"span\", _hoisted_9, \"Click the map to select a position\"))])]), _createElementVNode(\"div\", _hoisted_10, null, 512 /* NEED_PATCH */)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","_createElementVNode","key","ref","_createElementBlock","_Fragment","_hoisted_1","_hoisted_2","_hoisted_3","_createTextVNode","_toDisplayString","$setup","currPos","lat","toFixed","lng","_hoisted_4","_hoisted_5","distance","_hoisted_6","_hoisted_7","otherPos","_hoisted_8","_hoisted_9","_hoisted_10"],"sources":["C:\\SIEMENS_Proj\\front-end\\src\\App.vue"],"sourcesContent":["<script>\n/* eslint-disable no-undef */\nimport { computed, ref, onMounted, onUnmounted, watch } from 'vue'\nimport { useGeolocation } from './useGeolocation'\nimport { Loader } from '@googlemaps/js-api-loader'\n\nconst GOOGLE_MAPS_API_KEY = 'AIzaSyBea65xicuAhWz8oVHvEn6_Rlg8h9nr_EU'\n\nexport default {\n  name: 'App',\n  setup() {\n    const { coords } = useGeolocation()\n    const currPos = computed(() => ({\n      lat: coords.value.latitude,\n      lng: coords.value.longitude\n    }))\n    const otherPos = ref(null)\n\n    const loader = new Loader({ apiKey: GOOGLE_MAPS_API_KEY })\n    const mapDiv = ref(null)\n    let map = ref(null)\n    let clickListener = null\n    onMounted(async () => {\n      await loader.load()\n      map.value = new google.maps.Map(mapDiv.value, {\n        center: currPos.value,\n        zoom: 7\n      })\n      clickListener = map.value.addListener(\n        'click',\n        ({ latLng: { lat, lng } }) =>\n          (otherPos.value = { lat: lat(), lng: lng() })\n      )\n    })\n    onUnmounted(async () => {\n      if (clickListener) clickListener.remove()\n    })\n\n    let line = null\n    watch([map, currPos, otherPos], () => {\n      if (line) line.setMap(null)\n      if (map.value && otherPos.value != null)\n        line = new google.maps.Polyline({\n          path: [currPos.value, otherPos.value],\n          map: map.value\n        })\n    })\n\n    const haversineDistance = (pos1, pos2) => {\n      const R = 3958.8 // Radius of the Earth in miles\n      const rlat1 = pos1.lat * (Math.PI / 180) // Convert degrees to radians\n      const rlat2 = pos2.lat * (Math.PI / 180) // Convert degrees to radians\n      const difflat = rlat2 - rlat1 // Radian difference (latitudes)\n      const difflon = (pos2.lng - pos1.lng) * (Math.PI / 180) // Radian difference (longitudes)\n\n      const d =\n        2 *\n        R *\n        Math.asin(\n          Math.sqrt(\n            Math.sin(difflat / 2) * Math.sin(difflat / 2) +\n              Math.cos(rlat1) *\n                Math.cos(rlat2) *\n                Math.sin(difflon / 2) *\n                Math.sin(difflon / 2)\n          )\n        )\n      return d\n    }\n    const distance = computed(() =>\n      otherPos.value === null\n        ? 0\n        : haversineDistance(currPos.value, otherPos.value)\n    )\n    return { currPos, otherPos, distance, mapDiv }\n  }\n}\n</script>\n\n<template>\n  <div class=\"d-flex text-center\" style=\"height: 20vh\">\n    <div class=\"m-auto\">\n      <h4>Your Position</h4>\n      Latitude: {{ currPos.lat.toFixed(2) }}, Longitude:\n      {{ currPos.lng.toFixed(2) }}\n    </div>\n    <div class=\"m-auto\">\n      <h4>Distance</h4>\n      {{ distance.toFixed(2) }} miles\n    </div>\n    <div class=\"m-auto\">\n      <h4>Clicked Position</h4>\n      <span v-if=\"otherPos\">\n        Latitude: {{ otherPos.lat.toFixed(2) }}, Longitude:\n        {{ otherPos.lng.toFixed(2) }}\n      </span>\n      <span v-else>Click the map to select a position</span>\n    </div>\n  </div>\n  <div ref=\"mapDiv\" style=\"width: 100%; height: 80vh\" />\n</template>"],"mappings":";;EAgFOA,KAAK,EAAC,oBAAoB;EAACC,KAAoB,EAApB;IAAA;EAAA;;;EACzBD,KAAK,EAAC;AAAQ;gCACjBE,mBAAA,CAAsB,YAAlB,eAAa;;EAIdF,KAAK,EAAC;AAAQ;gCACjBE,mBAAA,CAAiB,YAAb,UAAQ;;EAGTF,KAAK,EAAC;AAAQ;gCACjBE,mBAAA,CAAyB,YAArB,kBAAgB;;EA3F1BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAmGOC,GAAG,EAAC,QAAQ;EAACH,KAAiC,EAAjC;IAAA;IAAA;EAAA;;;uBAnGpBI,mBAAA,CAAAC,SAAA,SAgFEJ,mBAAA,CAkBM,OAlBNK,UAkBM,GAjBJL,mBAAA,CAIM,OAJNM,UAIM,GAHJC,UAAsB,EAlF5BC,gBAAA,CAkF4B,aACZ,GAAAC,gBAAA,CAAGC,MAAA,CAAAC,OAAO,CAACC,GAAG,CAACC,OAAO,OAAM,eACtC,GAAAJ,gBAAA,CAAGC,MAAA,CAAAC,OAAO,CAACG,GAAG,CAACD,OAAO,oB,GAExBb,mBAAA,CAGM,OAHNe,UAGM,GAFJC,UAAiB,EAvFvBR,gBAAA,CAuFuB,GACjB,GAAAC,gBAAA,CAAGC,MAAA,CAAAO,QAAQ,CAACJ,OAAO,OAAM,SAC3B,gB,GACAb,mBAAA,CAOM,OAPNkB,UAOM,GANJC,UAAyB,EACbT,MAAA,CAAAU,QAAQ,I,cAApBjB,mBAAA,CAGO,QA/FbkB,UAAA,EA4F4B,aACV,GAAAZ,gBAAA,CAAGC,MAAA,CAAAU,QAAQ,CAACR,GAAG,CAACC,OAAO,OAAM,eACvC,GAAAJ,gBAAA,CAAGC,MAAA,CAAAU,QAAQ,CAACN,GAAG,CAACD,OAAO,wB,cAEzBV,mBAAA,CAAsD,QAhG5DmB,UAAA,EAgGmB,oCAAkC,G,KAGnDtB,mBAAA,CAAsD,OAAtDuB,WAAsD,8B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}